{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-51a9fb885912b6b1.js","src/js/favorites.js","node_modules/@parcel/runtime-js/lib/runtime-a6d53cf0214ec728.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"3Z9o3\\\":\\\"favorites.315349a1.js\\\",\\\"ee16w\\\":\\\"sprite.a5a4fc5d.svg\\\",\\\"7RrDr\\\":\\\"index.a227e3fc.js\\\"}\"));","import axios from 'axios';\nimport spriteUrl from '../images/sprite.svg';\n\n// ========================================    localStorageServsce    =============================== \nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\n\n// ========================================    APIServsce      ======================================  \n\n class UnsplashAPI {\n  static BASE_URL = 'https://tasty-treats-backend.p.goit.global/api';\n  \n  constructor() {\n    this.query = 0;\n  }\n  fetchPhotosByQuery() {\n     \n          return axios.get(`${UnsplashAPI.BASE_URL}/recipes/${this.query}`);\n    };\n}\n\n\n// ========================================   querySelectorelementov ================================\n\nconst productsListEl = document.querySelector(\".recipes-list\");\nconst divEl = document.querySelector(\".favorites-error\");\nconst divButtonEl = document.querySelector(\".js-div-button\");\nconst allCategoriesEl = document.querySelector(\".js-all-categories\");\n\nconst unsplashAPI = new UnsplashAPI();\nunsplashAPI.query = 0;\nlet productsTocart = [];\n\nconst onIntersectingElIntersectingViewport = async entries => {\n   \n try { \n\n   const { data } = await unsplashAPI.fetchPhotosByQuery();\n   \n   productsTocart.push(data);\n   \n  } catch (err) { console.log(err) };\n \n}\n\n\n//  ============================================ appeal to localStorage ===============================\n\nconst appendCartItems = () => {\n\n  const productsidentificators = load('BI8886EB');\n\n  if (productsidentificators === undefined) {\n  \n    divEl.classList.remove('visually-hidden');\n    allCategoriesEl.add ('is-hiden')\n\n      return;\n  }\n  if (productsidentificators.length === 0) {\n  \n    divEl.classList.remove('visually-hidden');\n    \n      return;\n  }\n\n  for (const iterator of productsidentificators) {\n    \n    unsplashAPI.query = iterator\n\n    onIntersectingElIntersectingViewport();\n  }\n\n};\nappendCartItems();\n\n\n// =================================================  CreateGalleryCards =============================================\n\n\nfunction createGalleryCards (arr) {\n\n  const productsToCartTemplate = arr.map(productinfo => {\n\n    let roundedNumber = parseFloat(productinfo.rating.toFixed(1));\n    \n     const isActive = isRecipeLiked(productinfo._id)\n\n         return  `\n          <li class=\"recipes-list-item\" style=\"background: linear-gradient(1deg, rgba(5, 5, 5, 0.60) 4.82%, rgba(5, 5, 5, 0.00) 108.72%), url(${productinfo.thumb}); background-size: cover;\n              background-position: center;\n              background-repeat: no-repeat\">\n              <button type=\"button\" class=\"recipes-list-item-like-btn\">\n               <svg class=\"recipes-list-item-like-btn-img\" width=\"22\" height=\"22\">\n                 <use class=\"${isActive ? 'active-heart' : 'not-active-heart'}\" href=\"${spriteUrl}#icon-heart\" data-resept-id=${productinfo._id}></use>\n               </svg>\n              </button>\n               <h3 class=\"subtitle\">${productinfo.title}</h3>\n               <p class=\"recipes-list-item-text\">${productinfo.description}</p>\n               <div class=\"recipes-rating\">\n               <div class=\"recipes-rating-body\">\n                <div class=\"recipes-rating-value\">${roundedNumber}</div>\n              <div class=\"recipes-rating-active\"></div>\n              <div class=\"recipes-rating-items\">\n          \n             </div>\n             </div>\n             </div>\n               <button class=\"recipes-list-see-recipe-btn\" type=\"button\" data-resept-id=${productinfo._id}>See recipe</button>\n             </div>\n          </li>\n            \n `\n  }).join('');\n  \n  productsListEl.innerHTML = productsToCartTemplate;\n\n}\n\n\n// ============================================  Сategory  ===========================================\n\n\nconst choiceСategory = (productsTocart) => {\n\n  const allCourses = productsTocart.flatMap(product => product.category);\n  \n  const productCategory = allCourses.filter((course, index, array) => array.indexOf(course) === index);\n  \n  const productCategoryButton = productCategory.map(category => {\n\n    return `\n   \n    <button class=\"favorites-btn\">${category}</button>\n\n    `\n  }).join('');\n\n  divButtonEl.innerHTML = productCategoryButton;\n\n};\n\n\n// ====================================  processing button clicks ====================================\n\nconst selectcategory = event => {\n  \n\n  if (event.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n\n  const arrCategory = productsTocart.filter(user => user.category === event.target.innerText);\n\n  productsListEl.innerHTML = '';\n\n  createGalleryCards(arrCategory);\n\n  allCategoriesEl.classList.remove('is-hiden');\n\n}\n\n\nconst allCategories = event => {\n\n if (event.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n\n  createGalleryCards(productsTocart);\n  \n  allCategoriesEl.classList.add('is-hiden');\n}\n\ndivButtonEl.addEventListener(\"click\", selectcategory);\nallCategoriesEl.addEventListener(\"click\", allCategories);\n\n\nconst timerIdcreateGalleryCards = setTimeout(createGalleryCards, 600, productsTocart);\nconst timerIdchoiceСategory = setTimeout(choiceСategory, 600, productsTocart);\n\n\n\n// ===================================================   Work With LocalStoreg  ==============================================\n\nconst buttonEl = document.querySelector(\".recipes-list\");\n\nconst deletLocalSnoregId = event => {\n \n  if (event.target.nodeName !== 'use') {\n    return;\n  }\n  \n  const localStorageData = localStorage.getItem(\"BI8886EB\");\n\n  const buttonIds = localStorageData ? JSON.parse(localStorageData) : [];\n  \n  \n  const buttonId = event.target.dataset.reseptId; \n\n  const buttonIndex = buttonIds.indexOf(buttonId);\n \n  if (buttonIndex === -1) {\n\n    event.target.classList.remove('not-active-heart');\n\n    event.target.classList.add('active-heart');\n\n    buttonIds.push(buttonId);\n\n  } else {\n    \n    event.target.classList.remove('active-heart');\n\n    event.target.classList.add('not-active-heart');\n\n    buttonIds.splice(buttonIndex, 1);\n  }\n\n  save(\"BI8886EB\", buttonIds);\n\n}\n\nbuttonEl.addEventListener(\"click\", deletLocalSnoregId);\n\n\nfunction isRecipeLiked(recipeId) {\n\n  const storedData = localStorage.getItem('BI8886EB');\n\n  const existingData = storedData ? JSON.parse(storedData) : [];\n\n  return existingData.includes(recipeId);\n}","module.exports = require('./helpers/bundle-url').getBundleURL('3Z9o3') + require('./helpers/bundle-manifest').resolve(\"ee16w\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","$efb73add0d662a75$exports","getBundleURL","resolve","$6befdf793f7dd1b0$var$UnsplashAPI","UnsplashAPI","this","query","key","$dIxxU","default","get","concat","BASE_URL","$parcel$interopDefault","$hKHmD","$6befdf793f7dd1b0$var$productsListEl","document","querySelector","$6befdf793f7dd1b0$var$divEl","$6befdf793f7dd1b0$var$divButtonEl","$6befdf793f7dd1b0$var$allCategoriesEl","$6befdf793f7dd1b0$var$unsplashAPI","$6befdf793f7dd1b0$var$productsTocart","$6befdf793f7dd1b0$var$onIntersectingElIntersectingViewport","$2TvXO","mark","_callee","entries","data","fetchPhotosByQuery","_ctx","sent","push","console","log","t0","$6befdf793f7dd1b0$var$createGalleryCards","arr","productsToCartTemplate","map","productinfo","recipeId","storedData","roundedNumber","parseFloat","rating","toFixed","isActive","_id","localStorage","getItem","includes","thumb","title","description","join","innerHTML","productsidentificators","serializedState","undefined","error","message","$6befdf793f7dd1b0$var$load","classList","remove","add","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","return","$6befdf793f7dd1b0$var$appendCartItems","addEventListener","event","target","nodeName","arrCategory","filter","user","category","innerText","setTimeout","productsTocart1","productCategoryButton","flatMap","product","course","index","array","indexOf","localStorageData","buttonIds","buttonId","dataset","reseptId","buttonIndex","splice","stringify","setItem","$6befdf793f7dd1b0$var$save"],"version":3,"file":"favorites.315349a1.js.map"}