{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-fb7676c5c13a10ec.js","src/js/favorites.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"246rV\\\":\\\"favorites.37c4994f.js\\\",\\\"lp5u4\\\":\\\"sprite.a5a4fc5d.svg\\\",\\\"gjYyB\\\":\\\"index.8e8ebdc1.js\\\"}\"));","import axios from 'axios';\nimport spriteUrl from '../images/sprite.svg';\nimport { openModal } from './modal-video';\n\n// ========================================    localStorageServsce    =============================== \nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\n\n// ========================================    APIServsce      ======================================  \n\n class UnsplashAPI {\n  static BASE_URL = 'https://tasty-treats-backend.p.goit.global/api';\n  \n  constructor() {\n    this.query = 0;\n  }\n  fetchPhotosByQuery() {\n     \n          return axios.get(`${UnsplashAPI.BASE_URL}/recipes/${this.query}`);\n    };\n}\n\n\n// ========================================   querySelectorelementov ================================\n\nconst productsListEl = document.querySelector(\".recipes-list\");\nconst divEl = document.querySelector(\".favorites-error\");\nconst divButtonEl = document.querySelector(\".js-div-button\");\nconst allCategoriesEl = document.querySelector(\".js-all-categories\");\n\nconst unsplashAPI = new UnsplashAPI();\nunsplashAPI.query = 0;\nlet productsTocart = [];\n\nconst onIntersectingElIntersectingViewport = async entries => {\n   \n try { \n\n   const { data } = await unsplashAPI.fetchPhotosByQuery();\n   \n   productsTocart.push(data);\n   \n  } catch (err) { console.log(err) };\n \n}\n\n\n//  ============================================ appeal to localStorage ===============================\n\nconst appendCartItems = () => {\n\n  const productsidentificators = load('BI8886EB');\n\n  if (productsidentificators === undefined) {\n  \n    divEl.classList.remove('visually-hidden');\n    allCategoriesEl.add ('is-hiden')\n\n      return;\n  }\n  if (productsidentificators.length === 0) {\n  \n    divEl.classList.remove('visually-hidden');\n    \n      return;\n  }\n\n  for (const iterator of productsidentificators) {\n    \n    unsplashAPI.query = iterator\n\n    onIntersectingElIntersectingViewport();\n  }\n\n};\nappendCartItems();\n\n\n// =================================================  CreateGalleryCards =============================================\n\n\nfunction createGalleryCards (arr) {\n\n  const productsToCartTemplate = arr.map(productinfo => {\n\n    let roundedNumber = parseFloat(productinfo.rating.toFixed(1));\n    \n     const isActive = isRecipeLiked(productinfo._id)\n\n         return  `\n          <li class=\"recipes-list-item\" style=\"background: linear-gradient(1deg, rgba(5, 5, 5, 0.60) 4.82%, rgba(5, 5, 5, 0.00) 108.72%), url(${productinfo.thumb}); background-size: cover;\n              background-position: center;\n              background-repeat: no-repeat\">\n              <button type=\"button\" class=\"recipes-list-item-like-btn\">\n               <svg class=\"recipes-list-item-like-btn-img\" width=\"22\" height=\"22\">\n                 <use class=\"${isActive ? 'active-heart' : 'not-active-heart'}\" href=\"${spriteUrl}#icon-heart\" data-resept-id=${productinfo._id}></use>\n               </svg>\n              </button>\n               <h3 class=\"subtitle\">${productinfo.title}</h3>\n               <p class=\"recipes-list-item-text\">${productinfo.description}</p>\n               <div class=\"recipes-rating\">\n               <div class=\"recipes-rating-body\">\n                <div class=\"recipes-rating-value\">${roundedNumber}</div>\n              <div class=\"recipes-rating-active\"></div>\n              <div class=\"recipes-rating-items\">\n          \n             </div>\n             </div>\n             </div>\n               <button class=\"recipes-list-see-recipe-btn\" type=\"button\" data-resept-id=${productinfo._id} style='position: relative; z-index: 0'>See recipe</button>\n             </div>\n          </li>\n            \n `\n  }).join('');\n  \n  productsListEl.innerHTML = productsToCartTemplate;\n\n}\n\n\n// ============================================  小ategory  ===========================================\n\n\nconst choice小ategory = (productsTocart) => {\n\n  const allCourses = productsTocart.flatMap(product => product.category);\n  \n  const productCategory = allCourses.filter((course, index, array) => array.indexOf(course) === index);\n  \n  const productCategoryButton = productCategory.map(category => {\n\n    return `\n   \n    <button class=\"favorites-btn\">${category}</button>\n\n    `\n  }).join('');\n\n  divButtonEl.innerHTML = productCategoryButton;\n\n};\n\n\n// ====================================  processing button clicks ====================================\n\nconst selectcategory = event => {\n  \n\n  if (event.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n\n  const arrCategory = productsTocart.filter(user => user.category === event.target.innerText);\n\n  productsListEl.innerHTML = '';\n\n  createGalleryCards(arrCategory);\n\n  allCategoriesEl.classList.remove('is-hiden');\n\n}\n\n\nconst allCategories = event => {\n\n if (event.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n\n  createGalleryCards(productsTocart);\n  \n  allCategoriesEl.classList.add('is-hiden');\n}\n\ndivButtonEl.addEventListener(\"click\", selectcategory);\nallCategoriesEl.addEventListener(\"click\", allCategories);\n\n\nconst timerIdcreateGalleryCards = setTimeout(createGalleryCards, 600, productsTocart);\nconst timerIdchoice小ategory = setTimeout(choice小ategory, 600, productsTocart);\n\n\n\n// ===================================================   Work With LocalStoreg  ==============================================\n\nconst buttonEl = document.querySelector(\".recipes-list\");\n\nconst deletLocalSnoregId = event => {\n \n  if (event.target.nodeName !== 'use') {\n    return;\n  }\n  \n  const localStorageData = localStorage.getItem(\"BI8886EB\");\n\n  const buttonIds = localStorageData ? JSON.parse(localStorageData) : [];\n  \n  \n  const buttonId = event.target.dataset.reseptId; \n\n  const buttonIndex = buttonIds.indexOf(buttonId);\n \n  if (buttonIndex === -1) {\n\n    event.target.classList.remove('not-active-heart');\n\n    event.target.classList.add('active-heart');\n\n    buttonIds.push(buttonId);\n\n  } else {\n    \n    event.target.classList.remove('active-heart');\n\n    event.target.classList.add('not-active-heart');\n\n    buttonIds.splice(buttonIndex, 1);\n  }\n\n  save(\"BI8886EB\", buttonIds);\n\n}\n\nbuttonEl.addEventListener(\"click\", deletLocalSnoregId);\n\n\nfunction isRecipeLiked(recipeId) {\n\n  const storedData = localStorage.getItem('BI8886EB');\n\n  const existingData = storedData ? JSON.parse(storedData) : [];\n\n  return existingData.includes(recipeId);\n}\n\n\n// =====================================  Open Modal Video ==============================\n\n\nbuttonEl.addEventListener('click', function (event) {\n\n   if (event.target.nodeName !== 'BUTTON') {\n    \n    return;\n\n  }\n\n  const btnId = event.target.dataset.reseptId;\n\n  openModal(btnId);\n\n});\n\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();"],"names":["parcelRequire","register","JSON","parse","$iJYdK","$a4212a039eccdb43$exports","URL","resolve","import","meta","url","toString","$7f07f86ee49d81c7$var$UnsplashAPI","fetchPhotosByQuery","$2shzp","default","get","BASE_URL","this","query","constructor","$parcel$interopDefault","$7f07f86ee49d81c7$var$productsListEl","document","querySelector","$7f07f86ee49d81c7$var$divEl","$7f07f86ee49d81c7$var$divButtonEl","$7f07f86ee49d81c7$var$allCategoriesEl","$7f07f86ee49d81c7$var$unsplashAPI","$7f07f86ee49d81c7$var$productsTocart","$7f07f86ee49d81c7$var$onIntersectingElIntersectingViewport","async","entries","data","push","err","console","log","$7f07f86ee49d81c7$var$createGalleryCards","arr","productsToCartTemplate","map","productinfo","roundedNumber","parseFloat","rating","toFixed","isActive","recipeId","storedData","localStorage","getItem","includes","$7f07f86ee49d81c7$var$isRecipeLiked","_id","thumb","title","description","join","innerHTML","productsidentificators","key","serializedState","undefined","error","message","$7f07f86ee49d81c7$var$load","classList","remove","add","length","iterator","$7f07f86ee49d81c7$var$appendCartItems","addEventListener","event","target","nodeName","arrCategory","filter","user","category","innerText","setTimeout","productsTocart1","productCategoryButton","flatMap","product","course","index","array","indexOf","$7f07f86ee49d81c7$var$buttonEl","localStorageData","buttonIds","buttonId","dataset","reseptId","buttonIndex","splice","value","stringify","setItem","$7f07f86ee49d81c7$var$save","btnId","$9ZN1D","openModal"],"version":3,"file":"favorites.37c4994f.js.map"}